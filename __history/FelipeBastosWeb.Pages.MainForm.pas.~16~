unit FelipeBastosWeb.Pages.MainForm;

interface

uses
  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,
  System.Generics.Collections,
  FMX.Types, FMX.Controls, FMX.Forms, FMX.Graphics, FMX.Dialogs,
  FMX.Controls.Presentation, FMX.StdCtrls,
  FelipeBastosWeb.Pages.SignInForm, FelipeBastosWeb.Pages.SignUpForm,
  FMX.Objects, FMX.Layouts, FMX.ListBox, FireDAC.Stan.Intf, FireDAC.Stan.Option,
  FireDAC.Stan.Error, FireDAC.UI.Intf, FireDAC.Phys.Intf, FireDAC.Stan.Def,
  FireDAC.Stan.Pool, FireDAC.Stan.Async, FireDAC.Phys, FireDAC.Phys.SQLite,
  FireDAC.Phys.SQLiteDef, FireDAC.Stan.ExprFuncs,
  FireDAC.Phys.SQLiteWrapper.Stat, FireDAC.FMXUI.Wait, FireDAC.Stan.Param,
  FireDAC.DatS, FireDAC.DApt.Intf, FireDAC.DApt, Data.DB, FireDAC.Comp.DataSet,
  FireDAC.Comp.Client, DataModule.MainModule;

type
  TMainForm = class(TForm)
    Image1: TImage;
    Layout1: TLayout;
    Label1: TLabel;
    UsersRegisteredListBox: TListBox;
    Layout2: TLayout;
    Label3: TLabel;
    Button2: TButton;
    Label2: TLabel;
    Button3: TButton;
    RoundRect1: TRoundRect;
    Label4: TLabel;
    procedure Button2Click(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure RoundRect1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  MainForm: TMainForm;

implementation

{$R *.fmx}

uses  Models.UserModel;

procedure TMainForm.Button2Click(Sender: TObject);
begin
    SignUpForm.Show;
end;

procedure TMainForm.FormShow(Sender: TObject);
var UserRegisteredList : TList<TUser>;
begin
  // update user listbox
  UserRegisteredList := DataModule1.UserRegisteredList;
  UsersRegisteredListBox.BeginUpdate;
  UsersRegisteredListBox.Items.Clear;
  for var i := 0 to UserRegisteredList.Count - 1 do begin
    UsersRegisteredListBox.Items.Add(UserRegisteredList[i].Username);
  end;
  UsersRegisteredListBox.EndUpdate;
end;

procedure TMainForm.RoundRect1Click(Sender: TObject);
begin
    SignInForm.Show;
end;

end.
